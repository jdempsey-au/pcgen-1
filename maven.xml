<project xmlns:maven="jelly:maven" xmlns:j="jelly:core"
    xmlns:ant="jelly:ant" xmlns:u="jelly:util">
	<goal name="generate-jars">
		<ant:ant dir="${basedir}" antfile="build.xml" target="build-plugins">
			<property name="build.classes.dir" value="${maven.build.dest}"/>
		</ant:ant>
	</goal>
    <preGoal name="java:compile">
        <attainGoal name="javacc:javacc-generate"/>
        <!-- Kludge around a typo in the JavaCC  -->
        <ant:path id="maven.javacc.compile.src.set"
            location="${basedir}/target/generated-src"/>
        <maven:addPath id="maven.compile.src.set"
            refid="maven.javacc.compile.src.set"/>
    </preGoal>
    <postGoal name="java:compile">
		<attainGoal name="generate-jars" />
    </postGoal>
    <preGoal name="maven-javadoc-plugin:report">
    	<attainGoal name="javacc:javacc-generate"/>
    </preGoal>
</project>    
